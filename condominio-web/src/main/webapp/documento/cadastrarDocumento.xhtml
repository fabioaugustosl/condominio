<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/WEB-INF/templates/default.xhtml">
   
   <ui:define name="content">
   	<h1><p:outputLabel value="Cadastro de documentos" /></h1>
 	<br />
 	
 	<h:form id="form" enctype="multipart/form-data">
	    
	    <p:outputPanel id="containerNovoDoc">
	    
			<p:outputLabel value="Título:" /> <br />
			<p:inputText id="titulo" alt="Insira o título do documento" styleClass="inputPadrao" 
				value="#{cadastroDocumentoController.documento.titulo}" maxlength="400" 
				required="true" requiredMessage="Favor preencher o título do documento." />
			<br />
			
			<p:outputLabel value="Descrição:" /><br />
	        <p:inputTextarea id="descricaoDoc" alt="Insira a descrição do documento" styleClass="textAreaPadrao"
				value="#{cadastroDocumentoController.documento.descricao}" maxlength="2000"  />
	        <br />
	        
	        <p:outputLabel value="Anexar documento:" /><br />
	        <p:fileUpload rendered="#{cadastroDocumentoController.documento.arquivo == null}"
			        mode="advanced" update="containerNovoDoc" label="Selecionar arquivo"
			        fileUploadListener="#{cadastroDocumentoController.uploadArquivo}"
			        allowTypes="/(\.|\/)(pdf|PDF|doc|DOC|docx|DOCX)$/" 
			        multiple="false" sizeLimit="100000000" fileLimitMessage="O arquivo é muito grande. " 
			        auto="true" dragDropSupport="false" />
			<br />
			<p:outputPanel rendered="#{cadastroDocumentoController.documento.arquivo != null}">
				<p:outputLabel value="#{cadastroDocumentoController.documento.arquivo.nomeOriginal}"></p:outputLabel>
				<p:commandButton id="removerArq" value="Remover" immediate="true"
			   		actionListener="#{cadastroDocumentoController.removerArquivo}" 
			   		update="containerNovoDoc">
			   	</p:commandButton>
			</p:outputPanel>
			
	 	</p:outputPanel>
	 	
	 	<p:commandButton id="salvarDoc" value="Salvar" 
	   		actionListener="#{cadastroDocumentoController.salvarDocumento}" 
	   		update="containerNovoDoc">
	   	</p:commandButton>
	   	
	 	<p:commandButton id="listagemDocumento" value="Ir para listagem" immediate="true"
	   		actionListener="#{cadastroDocumentoController.irParaListagem}"  >
	   	</p:commandButton>
	 	
	</h:form>
   </ui:define>
</ui:composition>
