<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui">
  
  <style type="text/css">  
    
    #formVotacao\:dtVotacao_content ul {
	    list-style-type: none !important;
	    padding: 5px;
	    margin: 0px;
	    background-color: #FAFAFA;
	}
   </style>
  
  
   <h:form id="formVotacao" style="width:100%">	  
	<p:growl id="msgsGrowlVotacao" showDetail="true" autoUpdate="false"  />
   	<p:outputPanel id="containerVotacao" style="border:0px !important;">
   		<p:dataGrid paginator="false"  
   		id="dtVotacao" var="vv" value="#{votacaoController.votacoesView}" style="border:0px !important;" 
   		columns="1" >
			<p:outputPanel id="perguntinha" style="margin-top:5px;" >
				<p:outputLabel value="#{vv.votacao.assuntoVotacao}"></p:outputLabel> 
	    	</p:outputPanel>
	    	
			<p:outputPanel id="opcoesTipoVotacao" rendered="#{not vv.votou}" >
		    	
		    	<p:outputPanel id="tipoSimNao" rendered="#{vv.util.isSimNao()}"> 
		    		<p:selectOneRadio  id="consoleSN"  value="#{vv.util.valorSimNao}">
			          	<f:selectItem itemLabel="Não" itemValue="false" />
	            		<f:selectItem itemLabel="Sim" itemValue="true" />
			        </p:selectOneRadio>
		    	</p:outputPanel>
		    	<p:outputPanel id="tipoData" rendered="#{vv.util.isData()}"> 
		    		<p:calendar id="button" value="#{vv.util.valorData}" showOn="button" />
		    	</p:outputPanel>	
		    	<p:outputPanel id="tipoMoeda" rendered="#{vv.util.isMoeda()}" > 
		    		<p:inputText id="valorTipoMoeda" value="#{vv.util.valorMoeda}" >
		    			<f:convertNumber currencyCode="R$" type="currency" maxFractionDigits="2" />
		    		</p:inputText> 
		    	</p:outputPanel>
		    	<p:outputPanel id="tipoNumerico" rendered="#{vv.util.isNumerico()}"> 
		    		<p:inputText  id="valorTipoNumerico" value="#{vv.util.valorNumerico}" >
		    			<f:convertNumber type="number" maxFractionDigits="2"/>
		    		</p:inputText> 
		    	</p:outputPanel>
		    	<p:outputPanel id="tipoOpcao" rendered="#{vv.util.isOpcoes()}" > 
		    		<p:selectOneRadio id="opc" value="#{vv.util.idValorOpcao}" layout="grid" columns="1">
			            <f:selectItems value="#{vv.votacao.opcoes}" var="o" itemLabel="#{o.descricao}" itemValue="#{o.id}"/>
			        </p:selectOneRadio>
		    	</p:outputPanel>
		    		<!-- <p:captcha label="Captcha" /> -->
		    		<p:commandButton value="Votar" actionListener="#{votacaoController.votar(vv)}" 
		    				update="@form"></p:commandButton>
		    	
		    </p:outputPanel>

		    <p:outputPanel id="jaVotouVotacao" rendered="#{vv.votou}" >
		    	<div style="width:100%; height:25px; background-color: yellow;">
					<p:outputLabel value="Parabéns. Você já votou."></p:outputLabel> 
	    		</div>
		    </p:outputPanel>
		    
		    
		    <p:outputPanel id="verResultadoParcial" rendered="#{vv.votacao.isResultadoParcial()}"> 
				<p:commandButton id="btnResultadoParcial" value="Resultado Parcial" ></p:commandButton>
			
   				 <p:overlayPanel widgetVar="dialogResultadoParcial" id="dialogResultadoParcial" 
					for="btnResultadoParcial" hideEffect="fade" dynamic="true" >
		        	
		        	<p:dataTable id="gridResultadoParcial" value="#{vv.resultadoVotacaoSelecionada.keySet()}"
							emptyMessage="Nenhum voto foi computado para essa votação." var="res"  >
						
						<p:column headerText="Opção">
					        <p:outputLabel value="#{res}"></p:outputLabel>
					    </p:column>
					    
					    <p:column headerText="Votos">
					        <p:outputLabel value="#{vv.resultadoVotacaoSelecionada[res]}"></p:outputLabel>
					    </p:column>
						
					</p:dataTable>
		        	
		    	</p:overlayPanel>
			</p:outputPanel>
		
		</p:dataGrid>
		
		<div>
    		<p:commandLink id="linkTremosVotacao" value="Ler o termo jurídico sobre a votação online." ></p:commandLink>
    		<p:overlayPanel id="linkTremosVotacaoTexto" for="linkTremosVotacao" hideEffect="fade">
		        A votação não tem validade legal ou substitui a votação realizada em assembléia. 
		        Só é permitido um voto por apartamento. Com isso, apenas o primeiro voto de cada apartamento será computado.
		    </p:overlayPanel>
    	</div>
    </p:outputPanel>
    
		
    
    			
      
  </h:form>
</ui:composition>

