<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/WEB-INF/templates/default.xhtml">
   
   <ui:define name="content">
   
   <style>
   		.autoCompleteCss{
   			border: 0px!important;
   		}
   		
   		.autoCompleteCss input{
   			width:300px;
			border:1px solid #B6C1C5;
			border-left: 3px solid #6D909F;
			box-shadow: none !important;
   		}
   		
   		.autoCompleteCss button{
   			height: 30px !important; 
   			margin-top:5px !important;
   		}
   </style>
	
	<h:form id="form" styleClass="formPad10">   
	   
	   	<h1>Registrar nova ocorrência.</h1>
	   	<p:outputLabel styleClass="textoInformativo" value="Utilize esse espaço para registrar alguma ocorrência importante. Vale registrar sugestão de melhoria, reclamação de barulho, observação sobre a manutenção das áreas comuns do empreendimento, entre outras." />
	   		
   		<p:outputPanel id="cadastroOcorrenciaPanel" >
   			<p:outputPanel id="containerSelecionarUsuario" 
   					rendered="#{principalController.ehSindico() || principalController.ehAdministrativo()}" >
   					
   					<p:autoComplete id="autoCompleteUsuario" dropdown="true" 
   						value="#{registroOcorrenciaController.usuario}" maxResults="5"
   						 var="u" itemLabel="#{u.nomeExibicaoComUnidade}" itemValue="#{u}" converter="converterEntityById"
   						 styleClass="autoCompleteCss" 
   						completeMethod="#{registroOcorrenciaController.autoCompleteUsuarios}" />	
			</p:outputPanel>
	 	
	 		<p:outputLabel value="Data ocorrido" styleClass="labelPadrao" /><br />
	 		<p:calendar id="button" value="#{registroOcorrenciaController.registroOcorrencia.dataOcorrencia}" 
	 					showOn="button" pattern="MM/dd/yyyy HH:mm" />
	 	
	 		<br />
 			<p:outputLabel value="Descrição / Comentário" styleClass="labelPadrao" /><br />
			<p:inputTextarea rows="10" cols="50" id="txtAreaComentario" 
					styleClass="textAreaPadrao"
					required="true" requiredMessage="O preenchimento da descrição/comentário é obritagório."
					value="#{registroOcorrenciaController.registroOcorrencia.mensagem}"   />
			
			<br/>
			
			<p:commandButton id="btnSalvarRecebido" value="Salvar"  update="cadastroOcorrenciaPanel"
				styleClass="botao botao-grande"
		   		actionListener="#{registroOcorrenciaController.salvarOcorrencia}" >
		   	</p:commandButton>
		   	
		   	<p:commandButton id="btnListagemOcorrencia" value="Voltar"  immediate="true"
				styleClass="botao botao-grande"
		   		actionListener="#{registroOcorrenciaController.irParaListagem}" >
		   	</p:commandButton>
		
		</p:outputPanel>
				
	</h:form>
	
	<script >
	 <script type="text/javascript">
	    PrimeFaces.locales['pt_br'] = {
	        closeText: 'Fechar',
	        prevText: 'Anterior',
	        nextText: 'Próximo',
	        currentText: 'Hoje',
	        monthNames: ['Janeiro','Fevereiro','Março','Abril','Maio','Junho',
	            'Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'],
	        monthNamesShort: ['Jan','Fev','Mar','Abr','Mai','Jun',
	            'Jul','Ago','Set','Out','Nov','Dez'],
	        dayNames: ['Domingo','Segunda','Terça','Quarta','Quinta','Sexta','Sábado'],
	        dayNamesShort: ['Dom','Seg','Ter','Qua','Qui','Sex','Sab'],
	        dayNamesMin: ['Dom','Seg','Ter','Qua','Qui','Sex','Sab'],
	        weekHeader: 'Hf',
	        firstDay: 1,
	        isRTL: false,
	        showMonthAfterYear: false,
	        yearSuffix: '',
	        month: 'Mês',
	        week: 'Semana',
	        day: 'Dia',
	        allDayText : 'Hora'
	    };
	</script>
	</script>
   </ui:define>
</ui:composition>
