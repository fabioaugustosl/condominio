<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/WEB-INF/templates/default.xhtml">
   
   <ui:define name="content">
   	<h:form id="form" style="width:100%">
	   	<h1>Veja as indicações de seus vizinhos!</h1>
	 	<br />
	 	
	 	<p:tagCloud model="#{listagemIndicacaoController.model}" id="tagCloudCategoria" >
	        <p:ajax event="select" update="listaIndicacoes" listener="#{listagemIndicacaoController.selecionarCategoria}" />
	    </p:tagCloud>
	    
	    
	    <p:dataScroller id="listaIndicacoes" value="#{listagemIndicacaoController.indicacoes}" var="indicacao" chunkSize="10" >
	        <f:facet name="header">
	            Veja todas as indicações
	        </f:facet>
	 
	        <f:facet name="loader">
	            <p:commandButton type="button" value="Mais" icon="ui-icon-circle-triangle-s"/>
	        </f:facet>
	 
	        <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
	        
	            <p:graphicImage rendered="#{indicacao.arquivoDestaque != null}" name="#{indicacao.arquivoDestaque.caminhoCompleto}" /> 
	 
	            <p:outputPanel>
	                <h:panelGrid columns="2" cellpadding="5">
	                    <h:outputText value="Quem indicou:" />
	                    <h:outputText value="#{indicacao.usuario.nome}" />
	 
	                    <h:outputText value="Comentário:" />
	                    <h:outputText value="#{indicacao.comentario}" style="font-weight: bold"/>
	                </h:panelGrid>
	            </p:outputPanel>
	        </h:panelGrid>
	    </p:dataScroller>
	    
			    
	   	<p:commandButton id="novaIndicacao" value="Nova Indicação" immediate="true"
	   		actionListener="#{listagemIndicacaoController.irParaCadastro}"  >
	   	</p:commandButton>
	   

	 </h:form>
  </ui:define>
</ui:composition>
