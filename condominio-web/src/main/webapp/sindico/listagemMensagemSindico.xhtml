<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/WEB-INF/templates/default.xhtml">
   
   <ui:define name="content">
   	<h:form id="formMensagemSindico" >
	   	<h1><p:outputLabel value="Mensagens enviadas para o síndico" /></h1>
	 	<br />
	 	
		<p:dataTable id="dtListagemMsgSindico" var="msg" 
				value="#{listagemMensagemSindicoController.mensagens}"
				rowKey="#{msg.id}"
				rows="20"
                paginator="true"  paginatorPosition="bottom"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="20, 50, 100"
				emptyMessage="Ainda não foram enviadas nenhuma mensagem para o síndico através do site." >
				
				
			
		     <p:column headerText="Data">
		        <h:outputText value="#{msg.data}" >
		        	<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-03:00" />
		        </h:outputText>
		    </p:column>
		    
		    <p:column headerText="Usuário">
		        <h:outputText value="#{msg.usuario.nome}"></h:outputText>
		    </p:column>
		    
		    <p:column headerText="Mensagem">
		        <h:outputText value="#{msg.mensagem}"></h:outputText>
		    </p:column>
		    
		    <p:column >
		    	<p:commandLink actionListener="#{listagemMensagemSindicoController.removerMensagem(msg)}" ajax="false"
	         		id="excluirMsgSelecionada" value="Remover" immediate="true" >
	         			<p:confirm header="Confirmação" message="Tem certeza que deseja remover essa mensagem?" icon="ui-icon-alert" />
	         	</p:commandLink>
	         </p:column>
		</p:dataTable> 
	    
	   	
	   	<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
	        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
	        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
	    </p:confirmDialog>
    
	 </h:form>
	 
  </ui:define>
</ui:composition>
